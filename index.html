<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Interactive Crisis Management Themes and Codes Mind Map</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: #ffffff;
            color: #000000;
            height: 100vh;
            overflow: hidden;
        }
        .mind-map {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .center-node {
            background: #007749;
            color: #ffffff;
            padding: 20px;
            border-radius: 50%;
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0, 119, 73, 0.3);
            z-index: 10;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: absolute;
            font-size: 1.2em;
        }
        .center-node:hover {
            box-shadow: 0 15px 40px rgba(0, 119, 73, 0.5);
            transform: scale(1.05);
        }
        .theme-node {
            position: absolute;
            background: #ffb81c;
            color: #000000;
            padding: 15px;
            border-radius: 30px;
            font-size: 0.9em;
            font-weight: 400;
            box-shadow: 0 5px 20px rgba(255, 184, 28, 0.3);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            opacity: 0;
            transform: scale(0.5);
            text-align: center;
            width: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50px;
        }
        .theme-node:hover {
            box-shadow: 0 10px 30px rgba(255, 184, 28, 0.5);
            transform: scale(1.1) !important;
        }
        .theme-node.active {
            opacity: 1;
            transform: scale(1);
        }
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: #ffffff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            z-index: 200;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
        }
        .popup.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        .popup h2 {
            color: #007749;
            margin-top: 0;
            font-weight: 600;
        }
        .popup p {
            color: #000000;
            line-height: 1.8;
            font-weight: 300;
        }
        .code-list {
            list-style-type: none;
            padding: 0;
        }
        .code-item {
            background: #f0f0f0;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .code-item:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        path {
            fill: none;
            stroke: #007749;
            stroke-width: 2;
            opacity: 0;
            transition: all 0.5s ease;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #e03c31;
        }
        @media (max-width: 768px) {
            .center-node {
                width: 120px;
                height: 120px;
                font-size: 1em;
            }
            .theme-node {
                width: 100px;
                height: 40px;
                font-size: 0.8em;
            }
            .popup {
                max-width: 90%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="mind-map" id="mindMap">
        <div class="center-node" id="centerNode">Crisis Management Themes</div>
        <svg id="connectionsSvg"></svg>
    </div>
    <div class="popup" id="themePopup">
        <h2 id="themeTitle"></h2>
        <ul id="codeList" class="code-list"></ul>
        <button class="close-btn" onclick="hidePopup('themePopup')">&times;</button>
    </div>
    <div class="popup" id="expertPopup">
        <h2 id="expertTitle"></h2>
        <p id="expertDescription"></p>
        <button class="close-btn" onclick="hidePopup('expertPopup')">&times;</button>
    </div>

    <script>
    const themes = [
        {
            title: "Response Management",
            codes: [
                {code: "Mitigation", expert: "Estimation of ecological drought vulnerability indicators is the important step for drought mitigation management. \n Adaptation and mitigation are crucial when it comes to managing the impacts of climate change."},
                {code: "Risk Management", expert: "INFORM Risk Index is a global indicator-based disaster risk assessment tool that combines hazards, exposure, vulnerability and lack of coping capacity indicators with the purpose to support humanitarian crisis management decisions considering the current climate and population."},
                {code: "Community", expert: "Focusing on countries with greater than 0.05% estimated malaria slide prevalence in 2020, we identify 20 countries in which the majority of first administrative units are classified as High Innate Risk (reaching the 5% threshold within 6 years)"}
            ]
        },
        // Add more themes here...
    ];

    let themesVisible = false;

    function createMindMap() {
        const mindMap = document.getElementById('mindMap');
        const svg = document.getElementById('connectionsSvg');
        const centerNode = document.getElementById('centerNode');
        const rect = mindMap.getBoundingClientRect();
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const radius = Math.min(rect.width, rect.height) * 0.35;

        centerNode.style.left = `${centerX - 75}px`;
        centerNode.style.top = `${centerY - 75}px`;

        themes.forEach((theme, index) => {
            const angle = (index / themes.length) * 2 * Math.PI;
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);

            const themeNode = document.createElement('div');
            themeNode.className = 'theme-node';
            themeNode.textContent = theme.title;
            themeNode.style.left = `${x - 60}px`;
            themeNode.style.top = `${y - 25}px`;
            themeNode.onclick = (e) => {
                e.stopPropagation();
                showThemeDetails(theme.title, theme.codes);
            };

            mindMap.appendChild(themeNode);

            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            const d = `M${centerX},${centerY} Q${centerX + (x-centerX)*0.5},${centerY + (y-centerY)*0.5} ${x},${y}`;
            path.setAttribute('d', d);
            svg.appendChild(path);
        });
    }

    function toggleThemes() {
        const themeNodes = document.querySelectorAll('.theme-node');
        const paths = document.querySelectorAll('path');
        themesVisible = !themesVisible;

        themeNodes.forEach((node, index) => {
            setTimeout(() => {
                node.classList.toggle('active');
            }, index * 50);
        });

        paths.forEach((path, index) => {
            setTimeout(() => {
                path.style.opacity = themesVisible ? 1 : 0;
            }, index * 50);
        });
    }

    function showThemeDetails(title, codes) {
        const themePopup = document.getElementById('themePopup');
        const themeTitle = document.getElementById('themeTitle');
        const codeList = document.getElementById('codeList');

        themeTitle.textContent = title;
        codeList.innerHTML = '';
        codes.forEach(codeObj => {
            const li = document.createElement('li');
            li.className = 'code-item';
            li.textContent = codeObj.code;
            li.onclick = () => showExpertInfo(codeObj.code, codeObj.expert);
            codeList.appendChild(li);
        });
        showPopup('themePopup');
    }

    function showExpertInfo(title, description) {
        const expertTitle = document.getElementById('expertTitle');
        const expertDescription = document.getElementById('expertDescription');

        expertTitle.textContent = title;
        expertDescription.textContent = description;
        showPopup('expertPopup');
    }

    function showPopup(popupId) {
        const popup = document.getElementById(popupId);
        popup.classList.add('active');
    }

    function hidePopup(popupId) {
        const popup = document.getElementById(popupId);
        popup.classList.remove('active');
    }

    document.getElementById('centerNode').addEventListener('click', toggleThemes);

    document.addEventListener('click', (e) => {
        if (!e.target.closest('.theme-node') && !e.target.closest('.popup') && !e.target.closest('.center-node')) {
            hidePopup('themePopup');
            hidePopup('expertPopup');
        }
    });

    window.addEventListener('resize', () => {
        document.getElementById('mindMap').innerHTML = '<div class="center-node" id="centerNode">Crisis Management Themes</div><svg id="connectionsSvg"></svg>';
        createMindMap();
        if (themesVisible) toggleThemes();
    });

    createMindMap();
    </script>
</body>
</html>
